{% extends 'layouts/base.html' %}
{% block content %}

<div class="row  bg-light">
{% if matches%}
{% for match in matches%}
<div class="column col-md-4">
    <div class="card p-2 m-5">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSEU83iw_VAtyC3PEYitQPfOwwClXtI1xKlUhqtmDzwWbOTCGFrI_HDd6Y8IxW1Dgg3IbQ&usqp=CAU" class="card-img-top" alt="Product 1" style="height:350px;">
        <div class="card-body">
       <h2>{{match.category}}</h2>
          <p class="card-text text-dark">Date of Match:{{match.date|date:"Y-m-d"}}</p>
          <p class="card-text text-dark">Time:{{match.time|time:"H:i:s"}}</p>
          <p class="card-text text-dark ">Available Slots:{{match.slot_available}}/{{match.slots}}</p>
          <p class="card-text text-dark">Locality:{{match.locality}}</p>
          {% if match.creator != request.user.username %}
          <button type="button" class="btn btn-primary mb-4" data-bs-toggle="modal" data-bs-target="#exampleModalCenteredScrollable{{match.id}}">
           JOIN NOW
        </button>
        {%else%}
         <p>You are the organizer.<br>Visit <a class="" href="{% url 'my-matches' %}" id="my-matches-li">My Match</a> to edit</p>
         {%endif%}
        </div>
      </div>
 </div>
 <div class="modal fade" id="exampleModalCenteredScrollable{{match.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form role="form" method="POST" action="">
              {% csrf_token %} 
            <label >Game Category:</label>
            <input type="text" value="{{match.category}}" readonly name="id_category"> 
            <label>Date of Match:</label> 
            <input type="text" value="{{match.date|date:"Y-m-d"}}" readonly name="id_date">
            <label>Time of Match:</label> 
            <input type="text" value="{{match.time|time:"h:i:s"}}" readonly name="id_time">
            <label>Organized By:</label> 
            <input type="text" value="{{match.creator}}" readonly name="id_user"><br>
            <label>Location:</label> 
            <input type="text" value="{{match.locality}}" readonly name="id_locality">
            <input type="number" value="{{match.id}}" hidden name="id">
          <div class="card text-white bg-secondary" > 
            <div class="card-body">   
                This is some text within a card body.
            </div>
            </div>
              <button type="button" class="btn btn-secondary" >Close</button>
              <button type="submit" class="btn btn-primary">Request to Join</button>
        </form>
      </div>
  </div>
  </div>
  </div>
{%endfor%}
</div>
{% else %}
<div class="column col-md-4">
    <div class="card text-white bg-soft-info m-5" > 
      <div class="card-body">   
        <h3 class="mt-3 text-center">There aren't any more matches happening in your locality</h3>
        <p class="mt-3 text-center">
          Visit <a class="" href="{% url 'my-matches' %}" id="my-matches-li">My Match</a> to see the matches you created or joined
        </p>
      </div>
      </div>
</div>

{%endif%}
<script>
    document.getElementById('matches-li').classList.add('active')
</script>
{% endblock content %}