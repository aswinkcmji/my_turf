{% extends 'layouts/base.html' %}
{% load widget_tweaks %}
{% load mathfilters %}
{% block content %}

<section class="ecommerce container-fluid my-3" >

    <!-- checkout topbar -->
    <div class="ecomerce-top-bar card p-3">
        <div class="row">
            <div class="col-4">
                <span class="item-name" style="font-size: 1.4rem;">Checkout</span>
            </div>
        </div>
    </div>
    
    <!-- checkout main section -->
    <div class="ecom-main-section my-3">
            <div id="alerts-disimissible-component" class="tab-pane tab-example-result fade active show" role="tabpanel" aria-labelledby="alerts-disimissible-component-tab">                
                <div class="conatiner-fluid content-inner" style="min-height: calc(100vh - 14rem);">
                    <div class="row">                  
                       <div class="col-lg-12">
                          <div class="card   rounded">
                             <div class="card-body">
                                <div class="row">
                                   <div class="col-sm-12">    
                                      <h4 class="mb-3">OrderNo : {{num}}</h4>                              
                                      <h5 class="mb-3">Hello , {{request.user.username}} </h5>
                                   </div>
                                </div>
                                <div class="row">
                                   <div class="col-sm-12 mt-4">
                                      <div class="table-responsive-lg">
                                         <table class="table">
                                            <thead>
                                               <tr>
                                                  <th scope="col">Item</th>
                                                  <th class="text-center" scope="col">Quantity</th>
                                                  <th class="text-center" scope="col">Price</th>
                                                  <th class="text-center" scope="col">Totals</th>
                                               </tr>
                                            </thead>
                                            <tbody>
                                               {% for i in cartData%}
                                                    <tr>
                                                        <td>
                                                        <h6 class="mb-0">{{i.product_name}}</h6>
                                                        </td>
                                                        <td class="text-center">{{i.quantity}}</td>
                                                        <td class="text-center">{{i.price}}</td>
                                                        <td class="text-center">
                                                            {{ i.quantity|mul:i.price }}
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                                <tr>
                                                    <td colspan="3">
                                                    <h6 class="mb-0">Total</h6>
                                                    </td>
                                                    <td class="text-center">
                                                        {{totalAmount}}
                                                    </td>
                                                </tr>
                                            </tbody>
                                         </table>
                                      </div>
                                   </div>                              
                                </div>
                                <div class="row">
                                   <div class="col-sm-12">
                                      <div class="d-flex justify-content-center mt-4">
                                         <a href="{% url 'order' num %}"  class="btn btn-primary">Order</a>
                                      </div>
                                   </div>
                                </div>
                             </div>
                          </div>
                       </div>                                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous">
</script>
{% endblock content %}